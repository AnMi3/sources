|Release|Author          |Description                                       |  
|-------|----------------|--------------------------------------------------|  
|3.01.00|Allen Albright  |First Public Release (Day Zero Update)            |


OLDER


|Release|Author          |Description                                       |  
|-------|----------------|--------------------------------------------------|  
|2.00.01|Garry Lancaster |Peripherals: NextReg 9 bit 2 now completely disables DivMMC SPI ports ($EB and $E7) if set  |  
|2.00.02|Garry Lancaster |Peripherals: Drive button no longer causes a reset if DivMMC auto-paging is disabled  |  
|2.00.03|                |no valid change  |  
|2.00.04|Garry Lancaster |Fixed: Timex hi-res is now correctly aligned instead of offset 1 pixel to the left |  
|2.00.05|Allen Albright  |Fixed: Hang on reset caused by some ESP modules  |  
|2.00.06|Garry Lancaster |Peripherals: NextReg 9 bit 2 now also disables DivMMC paging port ($E3)<br/>Peripherals: NextReg 9 bit 3 disables Kempston mouse port ($DF)  |  
|2.00.07|Allen Albright  |Fixed: Read of nextreg 7 returns actual speed setting<br/>Fixed: DMA prescaler internally multiplied by four to reach lower sample rates<br/>Fixed: DMA sample rate constant for all CPU speeds  |  
|2.00.08|Allen Albright  |Fixed: DMA returns all idle cycles to CPU in burst mode<br/>Fixed: DMA implements daisy chain for multiple bus masters  |  
|2.00.09|Allen Albright  |Multiple Cores: Allow boot firmware to start a specific core identified by number 0-31  |  
|2.00.10|Jim Bagley      |Video: Layer2 palette bit 15 now acts as high priority bit, bringing Layer2 to the front if set, regardless of SLU setting<br/>Video: Added SLU 110: colour=(U+L)>>1<br/>Video: Added SLU 111: colour=(U+L) |  
|2.00.11|Allen Albright  |Fixed: AY zero volume means channel is silent  |  
|2.00.12|Allen Albright  |Fixed: Pentagon border timing  |  
|2.00.13|Garry Lancaster |Registers: NextReg 0x03 writes with bit 7 set now accepted in any mode to change timings (bits 6-4)<br/>Registers: Read of NextReg 0x3 bit 7 now returns next palette byte to be written (0=RRRGGGBB, 1=B-low)<br/>Fixed: NextReg 0x18, 0x19, 0x1A, 0x1C now readable |  
|2.00.14|Allen Albright  |Fixed: Pentagon port decoding on 0x7ffd for "Kpacku Deluxe"<br/>Fixed: DMA wait states stretch read/write cycles rather than insert delays between read/write cycles<br/>UART: Setting LSB of UART prescalar only affects LSB<br/>ExpBus: I/O port decoding raised to top level  |  
|2.00.15|                |intermediate  |
|2.00.16|                |intermediate  |
|2.00.17|Jim Bagley      |Video: Modified SLU 110 colour = (U+L) clamped<br/>Video: Modified SLU 111 colour = (U+L)-5<br/>Sprites: Fix left border bug<br/>Sprites: Raise limit per line to 16 (with caveats)  |
|2.00.18|Garry Lancaster|Z80N: Added 5 new barrel shift/rotate instructions:<br/>ED 28: BSLA DE,B (shift DE left by B places - uses bits 4..0 of B only)<br/>ED 29: BSRA DE,B (arithmetic shift right DE by B places - uses bits 4..0 of B only)<br/>ED 2A: BSRL DE,B (logical shift right DE by B places - uses bits 4..0 of B only)<br/>ED 2B: BSRF DE,B (shift right DE by B places, filling from left with 1s - uses bits 4..0 of B only)<br/>ED 2C: BRLC DE,B (rotate DE left by B places - uses bits 3..0 of B only)<br/>(to rotate right, use B=16-places)  |
|2.00.19|Allen Albright<br/>Garry Lancaster  |Z80N: ED 98 JP (C) -- PC[13:0] = IN (C) << 6<br/>Fixed: Sprites always appear above the ula border<br/>AY: Each AY can be made mono via NextReg 0x09 bits 7:5  |
|2.00.20|Allen Albright  |Sprites: New module allows all 64 sprites to display on a line  |
|2.00.21|Allen Albright  |Sprites: Fifth attribute byte is present if bit 6 of the fourth attribute byte is set<br/><br/>  H N6 0 X X Y Y Y8<br/><br/>  4-Bit Patterns<br/>   H = 1 means the sprite uses 4-bit patterns<br/>  N6 = 0 chooses the top 128 bytes of the 256-byte pattern otherwise the bottom 128 bytes<br/><br/>  Sprite Scaling<br/>  XX and YY affect scaling in the X and Y directions<br/>  00 = *1 16 pixels<br/>  01 = *2 32 pixels<br/>  10 = *4 64 pixels<br/>  11 = *8 128 pixels<br/><br/>  Y8 is the ninth bit of the Y coorindate to allow wrapping on the Y axis<br/><br/>Sprites: Nextreg 0x15 bit 6 = 1 changes sprite priority so that sprite 0 is on top<br/>Sprites: Nextreg 0x15 bit 5 = 1 enables clipping in over border mode<br/>Sprites: Writing to port 0x303B with bit 7 set adds an offset of 128 to the pattern index  |
|2.00.22|Allen Albright  |Z80N: Allow the cpu to run at 14MHz all the time if layer 2 is disabled<br/>Sprites: When not in over border mode, enforce clipping to display area at minimum<br/>Fixed: Sprites over-border clipping right edge adjusted one pixel left<br/>Fixed: Detection of too many sprites on a line was flawed<br/>Fixed: Sprites status port was always returning zero<br/>Fixed: Sprite module was writing vertical line at left edge on HDMI 60Hz  |
|2.00.23|Allen Albright  |Fixed: AY port decoding relaxed to work with sid-type music players<br/>Fixed: Clip window for sprites in over-border mode now extends to `X2*2+1` instead of `X2*2-1`<br/>Layer 2: Allow 14MHz when outside the layer 2 clip window vertically<br/>Sprites: Use coregen memories to reduce size<br/>Sprites: Implement relative sprite mode activated when H,N6=01.  In this mode an (x,y) coordinate, H bit and visibility bit are inherited from the last non-relative sprite.  The inherited (x,y) is added to the sprite's (x,y) to determine position, the inherited H bit together with normally reserved bit 5 determines 4-bit mode and the inherited visibility bit is ANDed with the sprite's visibility bit to determine if the sprite is drawn<br/>Sprites: A nexreg mirror is set up on register 0x34 (RW) to select sprite number and registers 0x35-0x39 (W) to directly access the corresponding sprite's attributes.  A second set of registers at 0x75-0x79 (W) are identical to 0x34-0x39 but a write to those will auto-increment the sprite number in register 0x34.<br/>Sprites: Setting bit 7 of the sprite number in nextreg 0x34 will tie the sprite number used by nextreg and io ports together.  |
|2.00.24|Allen Albright  |Sprites: Increase to 128 sprites from 64  |
|2.00.25|Allen Albright  |Fixed: CPU slowdown is applied in the active display area when the ULA shadow screen is active<br/>Fixed: ULA border colour in ULAnext mode is fetched from paper colours at palette offset 128<br/>ULA: Now scrolls using the LoRes scroll registers; scrolling in the x direction is currently limited to multiples of 8 pixels<br/>ULA: Nextreg 0x68 ULA Control added that disables ula output among other things<br/>Build: Registers inserted in video path to improve build reliability<br/>ExpBus: /RESET signal restored<br/>ExpBus: ULA /INT signal propagated to bus<br/><br/>Tilemap: A new display mode for tiles in either 40x32 (320x256) or 80x32 (640x256) resolution that occupies the same display area as sprites and shares 16k bank 5 with the ULA for its tilemap and tile definitions.<br/><br/>The tilemap consists of an array of 40x32 or 80x32 16-bit tiles with each tile described as follows:<br/><br/>bit 15-12 = palette offset<br/>bit    11 = X mirror<br/>bit    10 = Y mirror<br/>  bit     9 = rotate<br/>  bit     8 = ula over tilemap (tile id bit 8 if ula is disabled)<br/>  bit  7- 0 = tile id<br/><br/>Each tile glyph is 8x8 pixels and 32 bytes in size, defined in the same way as 4-bit sprites  |
|2.00.26|Allen Albright  |Tilemap: Obey SLU order in border area<br/>Sprites: Lock bit in nextreg 0x34 moved to bit 4 of nextreg 0x09 so that nextreg 0x34 can behave exactly like io port 0x303B when the two are tied  |
|2.00.27|Allen Albright  |ULANext: Paper and border colour for all ink mode now comes from the fallback colour in nextreg 0x4A<br/>DMA: Add Z80-DMA compatibility bit in nextreg 0x06.  When set, the transfer length is increased by one<br/>DMA: Implement the STATUS register returning 00E1101T where E=0 if the entire block has completed transfer at least once and T=1 if at least one byte has been transferred<br/>DMA: Implement new commands RESET 0xC3, RESET PORT A TIMING 0xC7, RESET PORT B TIMING 0xCB, READ STATUS BYTE 0xBF, REINITIALIZE STATUS BYTE 0x8B, INITIALIZE READ SEQUENCE 0xA7.  These are still being tested.<br/>Sprites: Implement a second relative sprite mode - the unified sprite.  Relative sprites are rotated and mirrored around the anchor.<br/>Tilemap: Make 512 tile mode a separately indicated mode in nextreg 0x6B instead of only being available when the ULA is disabled.<br/>Tilemap: Add bit to nextreg 0x6B to force the tilemap over the ULA.<br/>ZX48: Correct ram contention for 48k spectrum machine type.<br/>ULA: Fix Timex hi-res offset by one pixel bug.  |
|3.00.XX|Allen Albright  |Refactor, numerous changes  |
